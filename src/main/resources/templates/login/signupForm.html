<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layouts/default_layout}">

<div layout:fragment="content">
	<h1>회원가입</h1>
	<form action="/login/signup-proc" method="post">
		<div>
			<label for="username">UserName</label> <input type="text" name="username" id="username" required>
			<button type="button" onclick="handleCheckDuplication()">중복 체크</button>
		</div>
		<div>
			<label for="password">Password</label> <input type="password" name="password" id="password" required>
		</div>
		<div>
			<button type="submit">로그인</button>
		</div>
	</form>
	<script type="text/javascript">
		const handleCheckDuplication = () =>{
			let body = {
					username : $('#username').val()
			}
			console.log(body);
			fetch('/login/checkUsernameDuplication', {method : 'post', body : JSON.stringify(body)})
			.then((res)=>res.text())
			.then((text)=>{
				console.log(text);
			})
		}
	</script>
</div>
</html>